# Быстрый старт SP-Assistant

## Шаг 1: Установка зависимостей

```bash
npm install
```

## Шаг 2: Настройка переменных окружения

1. Создайте файл `.env` в корне проекта
2. Скопируйте содержимое из `.env.example` (если есть) или добавьте:

```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=your-anon-key
```

3. Замените значения на ваши из Supabase Dashboard

## Шаг 3: Настройка Supabase Edge Functions

В Supabase Dashboard → Project Settings → Edge Functions добавьте переменные:

```env
OPENAI_API_KEY=sk-...
OPENROUTER_API_KEY=sk-...
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

## Шаг 4: Загрузка документа СП 60.13330.2020

### Вариант A: Из PDF (рекомендуется)

Убедитесь, что PDF находится в `public/sp-60-13330-2020.pdf`, затем:

```bash
npm run load-sp-pdf
```

### Вариант B: Из TXT (упрощенный)

1. Конвертируйте PDF в TXT любым удобным способом
2. Сохраните как `public/sp-60-13330-2020.txt`
3. Запустите:

```bash
npm run load-sp-txt
```

**Важно:** Процесс займет 5-15 минут. Дождитесь сообщения об успешном завершении.

### Проверка загрузки документа

Чтобы убедиться, что документ успешно загружен:

```bash
npm run check-document
```

Скрипт покажет количество проиндексированных фрагментов.

## Шаг 5: Запуск приложения

```bash
npm run dev
```

Откройте http://localhost:5173

## Проверка работоспособности

1. В верхней части страницы должен быть индикатор "Документ проиндексирован"
2. Попробуйте задать вопрос, например:
   - "Какие требования к температуре в жилых помещениях?"
   - "Расскажи о нормах воздухообмена"

Система будет искать ответы в предзагруженном документе СП 60.13330.2020.

## Часто задаваемые вопросы

### Как переиндексировать документ?

Просто запустите скрипт загрузки заново (`npm run load-sp-pdf` или `npm run load-sp-txt`)

### Что делать, если возникла ошибка при загрузке?

1. Проверьте правильность API ключей
2. Убедитесь, что PDF файл не поврежден
3. Попробуйте использовать TXT вместо PDF
4. Смотрите подробности в [LOAD_DOCUMENT.md](./LOAD_DOCUMENT.md)

### Можно ли добавить другие документы?

Да! Просто измените `documentName` в скрипте и запустите его с нужным документом.

---

Подробная документация: [LOAD_DOCUMENT.md](./LOAD_DOCUMENT.md)

