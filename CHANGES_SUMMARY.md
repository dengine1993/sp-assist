# –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π - SP-–ê–≥–µ–Ω—Ç v2.0

## üéØ –ì–ª–∞–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –∏–∑ **SP-Assistant** (–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –æ–¥–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É) –≤ **SP-–ê–≥–µ–Ω—Ç** (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –°–ü).

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **–í—Ö–æ–¥:** http://localhost:5173/login
- **–õ–æ–≥–∏–Ω:** `admin`
- **–ü–∞—Ä–æ–ª—å:** `Chelsea1905`
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ drag-and-drop
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä, —É–¥–∞–ª–µ–Ω–∏–µ)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### 2. –ú—É–ª—å—Ç–∏–¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã–π –ø–æ–∏—Å–∫
- DeepSeek –∏—â–µ—Ç –ø–æ –≤—Å–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

### 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –°—á–µ—Ç—á–∏–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –°–ü
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
```
src/
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx          # –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Login.tsx                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ Admin.tsx                # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ ProtectedRoute.tsx       # –ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
    ‚îú‚îÄ‚îÄ DocumentUploader.tsx     # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    ‚îî‚îÄ‚îÄ DocumentsList.tsx        # –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
```
‚îú‚îÄ‚îÄ ADMIN_GUIDE.md              # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ CHANGES_SUMMARY.md          # –≠—Ç–∞ —Å–≤–æ–¥–∫–∞
‚îî‚îÄ‚îÄ (–æ–±–Ω–æ–≤–ª–µ–Ω—ã) README.md, START_HERE.md
```

## üîÑ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Frontend:
- **src/App.tsx**
  - –î–æ–±–∞–≤–ª–µ–Ω AuthProvider
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–æ—É—Ç—ã: /login, /admin
  - –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã —á–µ—Ä–µ–∑ ProtectedRoute

- **src/pages/Index.tsx**
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –ë–î
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  - –ö–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –°–ü

- **src/components/Header.tsx**
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ "SP-–ê–≥–µ–Ω—Ç"
  - –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### Backend:
- **supabase/functions/chat/index.ts**
  - –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º (`doc_name: null`)
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
  - –û–±–Ω–æ–≤–ª–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
  - –£–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

- **supabase/migrations/20251007095340_...sql**
  - –§—É–Ω–∫—Ü–∏—è `search_similar_chunks` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `document_name`

## ‚ùå –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/components/PdfProcessor.tsx` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω (–∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ localStorage
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (admin / Chelsea1905)
- –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (RLS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ PUBLIC)

### ‚ö†Ô∏è –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase Auth
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
3. –°—Ç—Ä–æ–≥–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
4. –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
5. HTTPS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

## üöÄ Workflow

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è:
1. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ `npm run load-sp-pdf`
2. –û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (—Ç–µ—Ä–º–∏–Ω–∞–ª)
3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –†–∞–±–æ—Ç–∞ —Å –æ–¥–Ω–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º

### –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:
1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `npm run dev`
2. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ UI
4. –†–∞–±–æ—Ç–∞ —Å –ª—é–±—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
```typescript
// AuthContext
const ADMIN_USERNAME = 'admin';
const ADMIN_PASSWORD = 'Chelsea1905';
const AUTH_KEY = 'sp_admin_auth';
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```typescript
// DocumentUploader.tsx
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ .txt —Ñ–∞–π–ª—ã
- –ú–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ process-pdf Edge Function
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
```

### –ü–æ–∏—Å–∫:
```typescript
// chat/index.ts
const { data: chunks } = await supabase.rpc('search_similar_chunks', {
  query_embedding: queryEmbedding,
  match_threshold: 0.7,
  match_count: 5,
  doc_name: null  // –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º!
});
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –ù–∞–∂–º–∏—Ç–µ "–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"
3. –í–æ–π–¥–∏—Ç–µ (admin / Chelsea1905)
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã .txt
5. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å
4. –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞

## üéì –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∂–∏–ª—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏—è—Ö?"
SP-–ê–≥–µ–Ω—Ç: "–°–æ–≥–ª–∞—Å–Ω–æ –°–ü 60.13330.2020, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞..."
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°—Ä–∞–≤–Ω–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏"
SP-–ê–≥–µ–Ω—Ç: "–í –°–ü 60.13330.2020 —É–∫–∞–∑–∞–Ω–æ..., 
           –∞ –≤ –°–ü 54.13330.2016 –≥–æ–≤–æ—Ä–∏—Ç—Å—è..."
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞–ø—Ä—è–º—É—é (—Å OCR)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø—Ä–æ—Å–º–æ—Ç—Ä/—Ä–µ–¥–∞–∫—Ç–æ—Ä/–∞–¥–º–∏–Ω)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç–≤–µ—Ç–æ–≤ –≤ PDF
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ LLM
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìù –ú–∏–≥—Ä–∞—Ü–∏—è —Å v1.0

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã:

1. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ë–î
2. ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
3. ‚úÖ –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
4. ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞—é—Ç (–Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã)

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:** `ADMIN_GUIDE.md`
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `START_HERE.md`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** `ARCHITECTURE.md`
- **–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** `README.md`

---

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** –û–∫—Ç—è–±—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

